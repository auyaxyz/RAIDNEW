-- Anti-AFK Script (Diperbarui untuk lebih natural)
local VirtualUser = game:GetService("VirtualUser")
game:GetService("Players").LocalPlayer.Idled:Connect(function()
	wait(math.random(300, 600))  -- Mengacak waktu agar terlihat lebih natural
	VirtualUser:CaptureController()
	VirtualUser:ClickButton2(Vector2.new(math.random(-10, 10), math.random(-10, 10))) -- Klik acak untuk menghindari pola yang sama
end)

print("Anti-AFK script telah diaktifkan!")

-- Lanjutan script Anda di bawah ini
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")

local PAD1 = script.Parent.Frame.PAD1
local Button1 = PAD1.Button
local Circle1 = PAD1.Circle

local PAD2 = script.Parent.Frame.PAD2
local Button2 = PAD2.Button
local Circle2 = PAD2.Circle

local PAD3 = script.Parent.Frame.PAD3
local Button3 = PAD3.Button
local Circle3 = PAD3.Circle

local AURA = script.Parent.Frame.AURA
local Button4 = AURA.Button
local Circle4 = AURA.Circle

local MinimizeButton = script.Parent.MinimizeButton
local Frame = script.Parent.Frame

local isPAD1On = false
local isPAD2On = false
local isPAD3On = false
local isAURAOn = false
local isMinimized = false
local isTeleporting = false
local auraCoroutine
local pad1Connection, pad2Connection, pad3Connection

_G.Kill_Aura = false

-- Fungsi untuk mengatur noclip
local originalCanCollide = {}
local function setNoclip(character, noclip)
	for _, part in ipairs(character:GetDescendants()) do
		if part:IsA("BasePart") then
			if noclip then
				originalCanCollide[part] = part.CanCollide
				part.CanCollide = false
			else
				if originalCanCollide[part] ~= nil then
					part.CanCollide = originalCanCollide[part]
				end
			end
		end
	end
end

-- Fungsi teleportasi dengan tween (Diperbarui agar lebih natural)
local function teleport(targetCFrame)
	local player = Players.LocalPlayer
	local character = player.Character or player.CharacterAdded:Wait()
	local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

	if targetCFrame then
		local targetPosition = targetCFrame.Position
		local distance = (humanoidRootPart.Position - targetPosition).Magnitude

		if distance > 5 then
			setNoclip(character, true)

			local tweenSpeed = (distance < 250) and 300 or (distance > 1000) and 100 or distance / 8
			local tweenDuration = distance / tweenSpeed + math.random() -- Memberikan variasi durasi

			local tweenInfo = TweenInfo.new(tweenDuration, Enum.EasingStyle.Linear, Enum.EasingDirection.Out)
			local tween = TweenService:Create(humanoidRootPart, tweenInfo, { CFrame = targetCFrame })

			local success, errorMessage = pcall(function()
				tween:Play()
				tween.Completed:Wait()
			end)

			if success then
				humanoidRootPart.CFrame = targetCFrame
			else
				warn("Teleport error: " .. tostring(errorMessage))
			end

			setNoclip(character, false)
		else
			warn("Player sudah berada di target CFrame")
		end
	else
		warn("Target CFrame tidak ditemukan")
	end
end

-- Fungsi toggle generik untuk PAD (Diperbarui untuk kestabilan)
local function togglePAD(PAD, Circle, isPADOn, targetCFrame, connection)
	isPADOn = not isPADOn
	if isPADOn then
		Circle.Position = UDim2.new(0.629, 0, 0, 0)
		PAD.ImageColor3 = Color3.fromRGB(53, 255, 110)
		
		-- Mengaktifkan teleportasi terus-menerus
		connection = RunService.Stepped:Connect(function()
			teleport(targetCFrame)
		end)
	else
		Circle.Position = UDim2.new(0, 0, 0, 0)
		PAD.ImageColor3 = Color3.fromRGB(200, 200, 200)

		-- Memutuskan koneksi jika tidak digunakan lagi
		if connection then
			connection:Disconnect()
			connection = nil
		end
		setNoclip(Players.LocalPlayer.Character, false)
	end
	return isPADOn, connection
end

-- Fungsi untuk toggle AURA (Diperbarui untuk lebih natural)
local function toggleAURA()
	isAURAOn = not isAURAOn
	_G.Kill_Aura = isAURAOn

	if isAURAOn then
		Circle4.Position = UDim2.new(0.629, 0, 0, 0)
		AURA.ImageColor3 = Color3.fromRGB(53, 255, 110)

		auraCoroutine = coroutine.wrap(function()
			while _G.Kill_Aura do
				local success, errorMessage = pcall(function()
					local playerCharacter = Players.LocalPlayer.Character
					if not playerCharacter then return end

					local playerPosition = playerCharacter:WaitForChild("HumanoidRootPart", 5).Position
					for _, enemy in pairs(game.Workspace.Enemies:GetChildren()) do
						local humanoid = enemy:FindFirstChild("Humanoid")
						local humanoidRootPart = enemy:FindFirstChild("HumanoidRootPart")

						if humanoid and humanoidRootPart and humanoid.Health > 0 then
							local distance = (humanoidRootPart.Position - playerPosition).Magnitude
							if distance <= 150 then
								wait(math.random(0.2, 1)) -- Jeda waktu acak agar lebih natural
								humanoid.Health = 0 -- NPC langsung mati
							end
						end
					end
				end)

				if not success then
					warn("Error in Kill Aura: " .. errorMessage)
				end

				wait(math.random(2, 3)) -- Interval lebih besar dan acak untuk mengurangi risiko terdeteksi
			end
		end)
		auraCoroutine()
	else
		Circle4.Position = UDim2.new(0, 0, 0, 0)
		AURA.ImageColor3 = Color3.fromRGB(200, 200, 200)
	end
end

-- Event listener untuk setiap tombol PAD
Button1.MouseButton1Click:Connect(function()
	isPAD1On, pad1Connection = togglePAD(PAD1, Circle1, isPAD1On, CFrame.new(-5018.04932, 318.081726, -2912.26807), pad1Connection)
end)

Button2.MouseButton1Click:Connect(function()
	isPAD2On, pad2Connection = togglePAD(PAD2, Circle2, isPAD2On, CFrame.new(-5003.35547, 318.081726, -2875.87671), pad2Connection)
end)

Button3.MouseButton1Click:Connect(function()
	isPAD3On, pad3Connection = togglePAD(PAD3, Circle3, isPAD3On, CFrame.new(-4988.50342, 318.081726, -2839.09277), pad3Connection)
end)

Button4.MouseButton1Click:Connect(toggleAURA)
MinimizeButton.MouseButton1Click:Connect(function()
	isMinimized = not isMinimized
	Frame.Visible = not isMinimized
end)

-- Set tampilan awal
local function setInitialState()
	Circle1.Position = UDim2.new(0, 0, 0, 0)
	PAD1.ImageColor3 = Color3.fromRGB(200, 200, 200)
	Circle2.Position = UDim2.new(0, 0, 0, 0)
	PAD2.ImageColor3 = Color3.fromRGB(200, 200, 200)
	Circle3.Position = UDim2.new(0, 0, 0, 0)
	PAD3.ImageColor3 = Color3.fromRGB(200, 200, 200)
	Circle4.Position = UDim2.new(0, 0, 0, 0)
	AURA.ImageColor3 = Color3.fromRGB(200, 200, 200)
end

setInitialState()
